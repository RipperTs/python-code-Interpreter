# === API 网关配置 ===
# 是否开启热重载（开发用）
DEBUG=false
# API 监听端口
PORT=14564

# === 执行器（Docker）配置 ===
# 单实例最大并发（同时运行容器数 / 也用于预热容器池）
MAX_WORKERS=4
# 单次执行超时（秒）
EXECUTION_TIMEOUT=120
# 执行器镜像地址（docker run 使用）
DOCKER_IMAGE=registry.cn-hangzhou.aliyuncs.com/ripper/python-executor:latest
# 容器网络模式：bridge/host/none（更严格可用 none，但会影响运行时 pip 安装依赖）
DOCKER_NETWORK_MODE=bridge
# 容器进程数限制（防 fork 炸弹等）
DOCKER_PIDS_LIMIT=256
# 多实例部署时用于避免容器池命名冲突（建议设置为容器 HOSTNAME 或 Pod 名）
EXECUTOR_INSTANCE_ID=local

# === 对外访问地址 ===
# 对外访问的 base url（如 https://ci.example.com 或 http://1.2.3.4:14564）
# 设置后 image_url / files[].url 会返回可直接点击的绝对链接
PUBLIC_BASE_URL=

# === 图片/文件落盘与 URL 前缀 ===
# 图片落盘目录（宿主机 / API 容器内路径）
IMAGE_STORE_PATH=./images
# 图片下载路由前缀
IMAGE_URL_PREFIX=/images
# 文件落盘目录（宿主机 / API 容器内路径）
FILE_STORE_PATH=./files
# 文件下载路由前缀
FILE_URL_PREFIX=/files

# === 输出文件回传限制（防滥用）===
# 单次执行最多回传文件数
OUTPUT_MAX_FILES=20
# 单个输出文件最大字节数
OUTPUT_FILE_MAX_BYTES=5242880
# 单次执行输出文件总大小上限
OUTPUT_TOTAL_MAX_BYTES=20971520
# 允许回传的输出文件后缀白名单（不含点号）
OUTPUT_ALLOWED_EXTENSIONS=md,csv,txt,json,log

# === 输入文件下载限制（防滥用）===
# 单次请求最多下载文件数
INPUT_MAX_FILES=10
# 单个输入文件最大字节数
INPUT_FILE_MAX_BYTES=20971520
# 单次请求输入文件总大小上限
INPUT_TOTAL_MAX_BYTES=52428800
